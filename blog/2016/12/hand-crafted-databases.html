<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="google-site-verification" content="hx4CI-AKLcJlsw_QRyv43VnQec61JqgxXVJk60uBDEY" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>Hand-crafted relational databases for fun and science</title> <link rel="stylesheet" href="https://datacarpentry.org/assets/css/styles_feeling_responsive.css"> <script src="https://datacarpentry.org/assets/js/modernizr.min.js"></script> <script> WebFontConfig = { google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }; (function() { var wf = document.createElement('script'); wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1.5.6/webfont.js'; wf.type = 'text/javascript'; wf.async = 'true'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wf, s); })(); </script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7cVolkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="twitter:card" content="summary"> <meta name="twitter:url" content="https://datacarpentry.org/blog/2016/12/hand-crafted-databases"> <meta name="twitter:title" content="Hand-crafted relational databases for fun and science"> <meta name="twitter:site" content="@datacarpentry"> <meta name="twitter:domain" content=""> <meta name="twitter:description" content=" "> <meta name="twitter:image" content="https://raw.githubusercontent.com/datacarpentry/logos/master/DC_twitter_logo_small.png?000"> <meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content=""/> <link rel="author" href="https://plus.google.com/u/0/118311555303973066167"/> <link rel="icon" sizes="32x32" href="https://datacarpentry.org/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="https://datacarpentry.org/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://datacarpentry.org/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://datacarpentry.org/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://datacarpentry.org/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://datacarpentry.org/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://datacarpentry.org/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://datacarpentry.org/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://datacarpentry.org/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="https://datacarpentry.org/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="https://datacarpentry.org/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="Hand-crafted relational databases for fun and science" /> <meta property="og:description" content="Data Carpentry is a lesson program of The Carpentries that develops and provides data skills training to researchers."/> <meta property="og:url" content="https://datacarpentry.org/blog/2016/12/hand-crafted-databases" /> <meta property="og:site_name" content="Data Carpentry" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="https://datacarpentry.org/humans.txt" /> </head> <body id="top-of-page" class=""> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="https://datacarpentry.org" class="icon-tree"> Data Carpentry</a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <li class="divider"></li> <li><a href="https://carpentries.org/supporters/" target="_blank">Sponsors</a></li> <li class="divider"></li> <li><a href="https://carpentries.org/contact/" target="_blank">Contact</a></li> <li class="divider"></li> <li><a href="https://datacarpentry.org/search/">Search</a></li> </ul> <ul class="left"> <li><a href="https://datacarpentry.org/">Home</a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://datacarpentry.org/about/">About</a> <ul class="dropdown"> <li><a href="https://datacarpentry.org/mission/">Mission & Vision</a></li> <li><a href="https://carpentries.org/citations/" target="_blank">Media</a></li> <li><a href="https://carpentries.org/team/" target="_blank">Our Team</a></li> <li><a href="https://docs.carpentries.org/topic_folders/policies/code-of-conduct.html" target="_blank">Code of Conduct</a></li> <li><a href="https://carpentries.org/governance/" target="_blank">Governance</a></li> <li><a href="https://datacarpentry.org/assessment/">Assessment</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://datacarpentry.org/workshops/">Workshops</a> <ul class="dropdown"> <li><a href="https://datacarpentry.org/workshops/">About our Workshops</a></li> <li><a href="https://datacarpentry.org/workshops-host/">Request a Workshop</a></li> <li><a href="https://datacarpentry.org/workshops-attend/">Attend a Workshop</a></li> <li><a href="https://datacarpentry.org/workshops-upcoming">Upcoming Workshops</a></li> <li><a href="https://datacarpentry.org/workshops-past">Past Workshops</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://carpentries.org/join/" target="_blank">Get Involved</a> <ul class="dropdown"> <li><a href="https://carpentries.org/membership/" target="_blank">Become a Member Organization</a></li> <li><a href="https://datacarpentry.org/involved-instructor/">Become an Instructor</a></li> <li><a href="https://carpentries.org/community/" target="_blank">Join our Community</a></li> <li><a href="https://carpentries.org/newsletter/" target="_blank">Newsletter</a></li> <li><a href="https://datacarpentry.org/involved-lessons/">Help Develop Lessons</a></li> <li><a href="https://carpentries.org/jobs/" target="_blank">Jobs</a></li> <li><a href="https://carpentries.org/donate/" target="_blank">Donate</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://datacarpentry.org/lessons/">Lessons</a> <ul class="dropdown"> <li><a href="https://datacarpentry.org/lessons/#ecology-workshop">Ecology</a></li> <li><a href="https://datacarpentry.org/lessons/#genomics-workshop">Genomics</a></li> <li><a href="https://datacarpentry.org/lessons/#social-science-curriculum">Social Sciences</a></li> <li><a href="https://datacarpentry.org/lessons/#geospatial-curriculum">Geospatial</a></li> <li><a href="https://datacarpentry.org/lessons/#materials-in-early-development">In Development</a></li> <li><a href="https://datacarpentry.org/lessons/#biology-semester-long-course">Semester Materials</a></li> <li><a href="https://datacarpentry.org/curriculum-advisors/">Curriculum Advisory Committeee</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://datacarpentry.org/blog/">Blog</a> <ul class="dropdown"> <li><a href="https://datacarpentry.org/blog/">Blog</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="https://datacarpentry.org/for-instructors/">For instructors</a> <ul class="dropdown"> <li><a href="https://datacarpentry.org/checkout/">Instructor training checkout</a></li> <li><a href="https://datacarpentry.org/checklists/">Workshop Checklists</a></li> <li><a href="https://datacarpentry.org/self-organized-workshops/">Self-organized Workshops</a></li> <li><a href="https://datacarpentry.org/mentoring/">Mentoring Opportunities</a></li> </ul> </li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div id="masthead"> <div class="row"> <div class="small-12 columns" align="center"> <a id="logo" href="https://datacarpentry.org" title="Data Carpentry – Making data science more efficient"> <img src="https://datacarpentry.org/assets/img/DC_logo_vision.png" alt="Data Carpentry – Making data science more efficient"> </a> </div><!-- /.small-12.columns --> </div><!-- /.row --> </div><!-- /#masthead --> <div class="row t30"> <div class="small-12 columns"> <article itemscope itemtype="http://schema.org/Article"> <header> <span itemprop="name"> <p class="subheadline">Data in the Field</p> <h1>Hand-crafted relational databases for fun and science</h1> </span> </header> <span itemprop="meta"> <div id="page-meta" class="t30"> <p> Authors: <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="pr20 icon-edit"><a href="/posts-by-authors/#blog-author-naupaka-zimmerman">Naupaka Zimmerman</a></span></span> <time class="icon-calendar pr20" datetime="2016-12-05" itemprop="datePublished"> 2016-12-05</time> <span class="icon-archive pr20">BLOG</span> <br /> <span class="pr20"><span class="icon-price-tag pr10"> <a href="/posts-by-tags/#blog-tag-skillshare">Skillshare</a></span> </span> </p> <!-- <div id="post-nav" class="row"> <div class="small-5 columns"> <a class="button small radius prev" href="/blog/2016/12/intro-data-in-field">&laquo; Making use of Data Skills</a> </div> <div class="small-2 columns text-center"> <a class="radius button small" href="/blog/archive/" title="Blog Archive">Archive</a> </div> <div class="small-5 columns text-right"> <a class="button small radius next" href="/blog/2016/12/moore-report">A Year in Review: Annual Moore Progress Report &raquo;</a> </div> --> </div> </div> </span> <p class="teaser" itemprop="description"> </p> <span itemprop="articleSection"> <p>I’m a microbial ecologist that is primarily interested in understanding the ecological causes and consequences of plant-microbe interactions. Like many ecologists these days, my research spans the gamut from field to lab to laptop. Often the work involves collecting some leaves from plants in the field or from plants in a greenhouse, and then culturing from those leaves the fungi that live asymptomatically within them (a.k.a. endophytic fungi). Sometimes studying these communities relies on culturing the organisms in Petri dishes, and sometimes on directly extracting the DNA or RNA from the samples and sequencing that. One of the hardest things for me has been simply keeping track of what samples came from where, when, and who did what to which samples. To give an example: Let’s say I’ve got a fungal culture growing in a Petri dish, and I want to know how many times it has been subcultured (that is, regrown from an existing culture), when those subculturing events happened, what kind of plant tissue the original progenitor culture came from, and where that plant tissue itself came from out in the field. Oh and then downstream, I also want to know something about all the other such fungi that came out of that same plant and all their metadata as well. And I want to be able to get all of that programmatically.</p> <p>Keeping track of this type of information is simple enough with dozens or even hundreds of samples. But with thousands, or even tens of thousands, it becomes untenable without a better system. So, as part of my postdoc, I invested some of my time in building a relational database to track all of this information for my own research projects. I had used SQL commands to query databases before for other projects, but I had never designed and implemented a database of my own. It seemed like building a small custom database would be a good solution to my problem and would help me develop a skill worth having.</p> <p>The first part of designing a database is thinking long and hard about a schema (basically the blueprint for the database’s structure). While relational databases allow you to represent highly complex datasets and the connections between and within different types of data, they are not nearly as flexible as a simple spreadsheet. Once they are built, it’s not trivial (although definitely possible) to change their structure. This is why having a good long think on how you’d like to represent your data within the database is really important. I found the macOS program <a href="https://www.omnigroup.com/omnigraffle">OmniGraffle</a> really helpful for putting this diagram together, but any vector drawing program (or pen and paper) would work.</p> <p>Here’s an example of a draft <a href="https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model">Entity Relationship Diagram</a> I made to think about different types of data I work with in my research and their relationships:</p> <p><img src="/images/blog/hand-crafted-databases/entity-relationship-diagram.png" alt="" /></p> <p>The first key step is to think about the different kinds of things you’d like to incorporate in the database. Each table in the database should represent only one type of thing, along with its associated metadata (see for example <a href="http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005097#pcbi-1005097-g001">Figure 1 here</a>). Not all tables have to be for tracking physical objects (e.g. plant samples, fungal cultures) though. One of the conventions I found useful was to have a table to track the events or actions that occurred to objects. So for example, there was one table for fungal cultures, and another for culture events. In the events table, I logged observations, subculturing events, DNA extraction events, and so on, and then each of these is linked back to one and only one culture in the culture table. The key advantage of this setup vs just adding these additional details to columns in a spreadsheet is that it allows for an arbitrarily large number of observations for any culture.</p> <p>Once you decide on the tables, then you can think about what type of information goes within each table and the practical work of creating the primary and foreign keys that link them all together. A piece of advice: consider using <a href="https://blog.codinghorror.com/primary-keys-ids-versus-guids/">UUIDs</a> for your primary and foreign keys. Might be a little more complicated than using integers as unique identifiers, but are less likely to cause problems in the future. And then you can use <code class="language-plaintext highlighter-rouge">grep</code> across all your datasets because the IDs are globally unique.</p> <p><img src="/images/blog/hand-crafted-databases/tables-small.png" alt="" /></p> <p>I started out by building a simple database using <a href="http://www.filemaker.com/products/">FileMaker Pro</a>. I had used the software as an undergrad, and was attracted by the ability to use it to serve mobile-ready interfaces (in other words they had a free add-on iOS app). I read, and highly recommend the book <em><a href="http://www.filemaker.com/learning/training/fts.html">FileMaker Training Series: Advanced</a></em> for an accessible overview of how to think about designing relational databases even if you aren’t using FileMaker. In the end though, I decided not to keep using it, and transitioned everything over into a <a href="https://sqlite.org/">SQLite</a> database. The primary rationale was that SQLite is non-proprietary, file-based (don’t need a server), and could easily be transitioned into a more complex relational database system (e.g. <a href="https://www.postgresql.org/">PostgreSQL</a>) in the future if needed. Plus SQLite plays really nicely with R and Python, which made scripting custom interfaces much more straightforward, and as a bonus is used in <a href="http://www.datacarpentry.org/sql-ecology-lesson/">Data Carpentry</a> <a href="http://www.datacarpentry.org/R-ecology-lesson/05-r-and-databases.html">lessons</a>. While I currently use the commercial <a href="https://www.navicat.com/products/navicat-for-sqlite">Navicat software</a> to ingest data into the database as I add to the spreadsheets that make up its tables, I am slowly working on developing a custom scripted interface to automate particular types of occurrence (returning from a field sample collection expedition, for example). In R, <a href="https://cran.r-project.org/web/packages/dplyr/vignettes/databases.html">dplyr works directly with SQLite</a> so you can write queries in native dplyr syntax. In Python, I’ve had good success with the <a href="https://docs.python.org/2/library/sqlite3.html">sqlite3 library</a>.</p> <p>Things I wish I had known about designing a database (and about doing science):</p> <ol> <li>Think about your schema before you start. It will change over time as you learn about your system and as your projects evolve, but externalizing your mental understanding on paper, on a whiteboard, or on a screen can be really helpful for clarifying what type of data and metadata you will need to collect and when. The easiest way to do this is to start with the simplest case and build out from there.</li> <li>Think about the type of projects you want to be working on in 5-10 years. Most likely the particular technologies we’ll all be reliant on then don’t exist yet. Invest in learning tools that will be flexible enough to handle this unknown future landscape.</li> <li>Tidy data is great for more than just using the <a href="https://mran.microsoft.com/web/packages/tidyverse/vignettes/manifesto.html">R tidyverse</a>. It also enables pivot tables in Excel, relational databases of any sort, and processing with powerful and fast command-line tools. If you do nothing else, keep your data tidy and your data analysis life will be so much easier.</li> <li>Taking a Data Carpentry workshop, or training to become an instructor, are great places to start building these practical skills and internalizing these mental approaches to data analysis. I didn’t see how powerful these types of computational tools could be when used in concert until I started teaching, as a Data Carpentry Instructor, others to do exactly that. Teaching, for me, has been the best way to keep learning.</li> </ol> </span> <a class="radius button small" href="/blog/2016/12/intro-data-in-field" title="">&laquo; Previous</a> <a class="radius button small" href="/blog/2016/12/moore-report" title="Next Posts">Next &raquo;</a> <h3 id="comments" class="t60">Dialogue &amp; Discussion</h3> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'datacarpentry'; var disqus_identifier = '/blog/2016/12/hand-crafted-databases'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </article> </div> </div> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> Data Carpentry is a lesson program of The Carpentries that develops and provides data skills training to researchers. <a href="https://datacarpentry.org/about/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://datacarpentry.org" title=""></a> </li> <li class="services-contact" > <a href="https://datacarpentry.org/contact/" title="Contact">Contact</a> </li> <li class="rss-link" > <a href="https://datacarpentry.org/feed.xml" title="Subscribe to RSS">RSS</a> </li> <li class="sitemap-link" > <a href="https://datacarpentry.org/sitemap.xml" title="Sitemap for Google Webmastertools">sitemap.xml</a> </li> </ul> </div><!-- /.large-4.columns --> <!-- <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Dankeschön</h5> <ul class="no-bullet shadow-black"> <li > <a href="https://datacarpentry.org" title=""></a> </li> <li class="network-entypo" > <a href="http://entypo.com/" target="_blank" title="Icons by Daniel Bruce">Icons by Daniel Bruce</a> </li> <li class="services-newsletter" > <a href="http://foundation.zurb.com/" target="_blank" title="Built on Foundation">Built on Foundation</a> </li> <li class="rss-link" > <a href="http://unsplash.com/" target="_blank" title="Images by Unsplash">Images by Unsplash</a> </li> <li class="sitemap-link" > <a href="http://srobbin.com/jquery-plugins/backstretch/" target="_blank" title="Using Backstretch by Scott Robbin">Using Backstretch by Scott Robbin</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> <div id="subfooter"> <nav class="row"> <section id="subfooter-left" class="b30 small-12 medium-6 columns"> <ul class="inline-list"> <li>Created with &hearts; by <a style="display:inline;" href="http://phlow.de/">Phlow</a> with <a style="display:inline;" href="http://jekyllrb.com/" target="_blank">Jekyll</a> using <a style="display:inline;" href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> </li> </ul> </section> <section id="subfooter-right" class="small-12 medium-6 columns social-icons"> <ul class="inline-list"> <li><a href="http://twitter.com/datacarpentry" target="_blank" class="icon-twitter" title="Data Carpentry on Twitter"></a></li> <li><a href="http://github.com/datacarpentry" target="_blank" class="icon-github" title="Data Carpentry on GitHub"></a></li> </ul> </section> </nav> </div><!-- /#subfooter --> </footer> <script src="https://datacarpentry.org/assets/js/javascript.min.js"></script> <script> $("#masthead").backstretch("https://datacarpentry.org/images/light-blue-wood-texture.jpg", {fade: 700}); $("#masthead-with-text").backstretch("https://datacarpentry.org/images/light-blue-wood-texture.jpg", {fade: 700}); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-68320080-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
